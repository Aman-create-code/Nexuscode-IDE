<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>NexusCode IDE Pro</title>
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/editor/editor.main.min.css">
    <style>
        :root {
            --activity-bg: #333333;
            --sidebar-bg: #252526;
            --editor-bg: #1e1e1e;
            --panel-bg: #1e1e1e;
            --status-bg: #007acc;
            --border: #3c3c3c;
            --text-muted: #858585;
        }

        body, html { margin: 0; height: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; background: #000; color: white; }
        
        /* Main Layout Grid */
        .app-grid {
            display: grid;
            grid-template-columns: 50px 250px 1fr 1fr; /* Activity, Sidebar, Editor, Preview */
            grid-template-rows: 1fr 200px 22px; /* Content, Panel, Status */
            height: 100vh;
        }

        /* A: Activity Bar */
        .activity-bar {
            grid-row: 1 / 3;
            background: var(--activity-bg);
            display: flex; flex-direction: column; align-items: center; padding-top: 10px; gap: 20px;
        }
        .act-icon { width: 28px; height: 28px; opacity: 0.5; cursor: pointer; border-left: 2px solid transparent; }
        .act-icon.active { opacity: 1; border-left-color: white; }

        /* B: Primary Side Bar */
        .sidebar {
            grid-row: 1 / 3;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
        }
        .sidebar-title { padding: 10px 20px; font-size: 11px; text-transform: uppercase; color: var(--text-muted); font-weight: bold; }
        .file-tree { padding: 0; margin: 0; list-style: none; font-size: 13px; }
        .file-item { padding: 4px 20px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .file-item:hover { background: #2a2d2e; }
        .file-item.active { background: #37373d; }

        /* C: Editor Groups */
        .editor-group {
            background: var(--editor-bg);
            display: flex; flex-direction: column;
            border-right: 1px solid var(--border);
        }
        .tabs { display: flex; background: #2d2d2d; height: 35px; overflow-x: auto; }
        .tab { padding: 8px 15px; font-size: 12px; background: #2d2d2d; border-right: 1px solid var(--border); cursor: pointer; min-width: 80px; text-align: center; }
        .tab.active { background: var(--editor-bg); color: white; }

        #editor-container { flex-grow: 1; }

        /* Preview Area (Eigene Erg√§nzung f√ºr App-Building) */
        .preview-group { grid-row: 1 / 3; background: white; display: flex; flex-direction: column; }
        .preview-toolbar { height: 35px; background: #f3f3f3; display: flex; align-items: center; padding: 0 10px; justify-content: space-between; border-bottom: 1px solid #ccc; }
        iframe { width: 100%; flex-grow: 1; border: none; }

        /* D: Panel (Terminal) */
        .panel {
            grid-column: 3 / 4; /* Nur unter dem Editor */
            background: var(--panel-bg);
            border-top: 1px solid var(--border);
            display: flex; flex-direction: column;
        }
        .panel-tabs { display: flex; padding: 0 20px; gap: 20px; font-size: 11px; border-bottom: 1px solid var(--border); height: 30px; align-items: center; color: var(--text-muted); }
        .panel-tabs span.active { color: white; border-bottom: 1px solid white; }
        #terminal-out { padding: 10px; font-family: monospace; font-size: 12px; color: #33ff33; overflow-y: auto; flex-grow: 1; }

        /* E: Status Bar */
        .status-bar {
            grid-column: 1 / 5;
            background: var(--status-bg);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 10px; font-size: 12px; color: white;
        }

        .run-btn { background: #28a745; color: white; border: none; padding: 2px 10px; border-radius: 2px; cursor: pointer; font-size: 11px; }
    </style>
</head>
<body>

<div class="app-grid">
    <div class="activity-bar">
        <div class="act-icon active">üìÑ</div>
        <div class="act-icon">üîç</div>
        <div class="act-icon">‚öôÔ∏è</div>
    </div>

    <div class="sidebar">
        <div class="sidebar-title">Explorer: Projekt-X</div>
        <ul class="file-tree">
            <li class="file-item active" onclick="switchFile('html')">index.html</li>
            <li class="file-item" onclick="switchFile('css')">style.css</li>
            <li class="file-item" onclick="switchFile('javascript')">script.js</li>
        </ul>
    </div>

    <div class="editor-group">
        <div class="tabs" id="tab-header">
            <div class="tab active" id="tab-name">index.html</div>
        </div>
        <div id="editor-container"></div>
    </div>

    <div class="preview-group">
        <div class="preview-toolbar">
            <span style="color: #666; font-size: 11px;">Browser Preview</span>
            <button class="run-btn" onclick="runApp()">Build & Run</button>
        </div>
        <iframe id="app-preview"></iframe>
    </div>

    <div class="panel">
        <div class="panel-tabs">
            <span>PROBLEMS</span>
            <span>OUTPUT</span>
            <span class="active">TERMINAL</span>
            <span>DEBUG CONSOLE</span>
        </div>
        <div id="terminal-out">> NexusCode Terminal ready...</div>
    </div>

    <div class="status-bar">
        <div>main* | JavaScript</div>
        <div>amancreatecode Copyright 2026</div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs/loader.min.js"></script>
<script>
    let editor;
    let currentFile = 'html';
    const codeStorage = {
        html: '<h1>Willkommen!</h1>\n<p>Baue deine App...</p>',
        css: 'body { background: #121212; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; }',
        javascript: 'console.log("App gestartet!");'
    };

    require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.34.1/min/vs' }});
    require(['vs/editor/editor.main'], function() {
        editor = monaco.editor.create(document.getElementById('editor-container'), {
            value: codeStorage.html,
            language: 'html',
            theme: 'vs-dark',
            automaticLayout: true,
            fontSize: 14,
            minimap: { enabled: true }
        });
    });

    function switchFile(type) {
        codeStorage[currentFile] = editor.getValue();
        currentFile = type;
        document.getElementById('tab-name').innerText = type === 'javascript' ? 'script.js' : (type === 'css' ? 'style.css' : 'index.html');
        monaco.editor.setModelLanguage(editor.getModel(), type === 'javascript' ? 'javascript' : type);
        editor.setValue(codeStorage[type]);
    }

    function runApp() {
        codeStorage[currentFile] = editor.getValue();
        const frame = document.getElementById('app-preview');
        const content = `<html><head><style>${codeStorage.css}</style></head><body>${codeStorage.html}<script>
            const oldLog = console.log;
            console.log = (m) => { window.parent.postMessage(m, "*"); oldLog(m); };
            try { ${codeStorage.javascript} } catch(e) { console.log(e); }
        <\/script></body></html>`;
        frame.srcdoc = content;
        document.getElementById('terminal-out').innerHTML += "<br>> Executing build...";
    }

    window.onmessage = (e) => {
        document.getElementById('terminal-out').innerHTML += `<br><span style="color:white">[LOG]: ${e.data}</span>`;
    };
</script>
</body>
</html>
